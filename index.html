<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Policy Blindspot - Guess the President</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 40px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #f39c12, #e74c3c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .tagline {
            color: #888;
            font-size: 1.1rem;
        }
        
        .score-board {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #5a9a8c;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #888;
            margin-top: 5px;
        }
        
        .policy-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 4px solid #5a9a8c;
        }
        
        .category {
            display: inline-block;
            padding: 5px 15px;
            background: rgba(90, 154, 140, 0.3);
            border-radius: 20px;
            font-size: 0.85rem;
            margin-bottom: 15px;
            color: #5a9a8c;
        }
        
        .policy-text {
            font-size: 1.3rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .question {
            color: #f39c12;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .choices {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .choice-btn {
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .choice-btn:hover {
            background: rgba(90, 154, 140, 0.3);
            border-color: #5a9a8c;
            transform: translateY(-2px);
        }
        
        .choice-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .choice-btn.correct {
            background: rgba(39, 174, 96, 0.3);
            border-color: #27ae60;
        }
        
        .choice-btn.wrong {
            background: rgba(231, 76, 60, 0.3);
            border-color: #e74c3c;
        }
        
        .reveal {
            display: none;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
            text-align: center;
        }
        
        .reveal.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .answer-president {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .answer-party {
            font-size: 1.2rem;
            color: #888;
            margin-bottom: 15px;
        }
        
        .year {
            font-size: 1rem;
            color: #5a9a8c;
        }
        
        .bias-meter {
            margin-top: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            display: none;
        }
        
        .bias-meter.show {
            display: block;
        }
        
        .bias-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #f39c12;
        }
        
        .bias-bar {
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }
        
        .bias-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #f39c12, #e74c3c);
            border-radius: 15px;
            transition: width 0.5s ease;
        }
        
        .bias-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.85rem;
            color: #888;
        }
        
        .next-btn {
            display: none;
            width: 100%;
            padding: 15px;
            background: #5a9a8c;
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }
        
        .next-btn.show {
            display: block;
        }
        
        .next-btn:hover {
            background: #4a8a7c;
            transform: translateY(-2px);
        }
        
        .fun-fact {
            margin-top: 20px;
            padding: 15px;
            background: rgba(243, 156, 18, 0.1);
            border-left: 3px solid #f39c12;
            border-radius: 0 10px 10px 0;
            font-style: italic;
            display: none;
        }
        
        .fun-fact.show {
            display: block;
        }
        
        .start-screen {
            text-align: center;
        }
        
        .mode-select {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 40px;
        }
        
        .mode-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .mode-card:hover {
            background: rgba(90, 154, 140, 0.1);
            border-color: #5a9a8c;
            transform: translateY(-5px);
        }
        
        .mode-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .mode-title {
            font-size: 1.4rem;
            color: #5a9a8c;
            margin-bottom: 10px;
        }
        
        .mode-desc {
            font-size: 0.95rem;
            color: #888;
            line-height: 1.5;
        }
        
        .start-btn {
            padding: 20px 60px;
            background: linear-gradient(45deg, #5a9a8c, #4a8a7c);
            border: none;
            border-radius: 15px;
            color: #fff;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
        }
        
        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(90, 154, 140, 0.3);
        }
        
        .reaction-btn {
            padding: 20px 30px;
            font-size: 1.2rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .reaction-btn:hover {
            transform: translateY(-3px);
        }
        
        .reaction-btn.like {
            border-color: #27ae60;
        }
        
        .reaction-btn.like:hover {
            background: rgba(39, 174, 96, 0.2);
        }
        
        .reaction-btn.middle {
            border-color: #f39c12;
        }
        
        .reaction-btn.middle:hover {
            background: rgba(243, 156, 18, 0.2);
        }
        
        .reaction-btn.hate {
            border-color: #e74c3c;
        }
        
        .reaction-btn.hate:hover {
            background: rgba(231, 76, 60, 0.2);
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üó≥Ô∏è Policy Blindspot</h1>
            <p class="tagline">Can you guess who proposed it? No names, just policy.</p>
        </header>
        
        <div class="start-screen" id="startScreen">
            <p style="font-size: 1.2rem; margin: 30px 0; line-height: 1.8;">
                Discover how much political tribalism affects your judgment.
                <br><br>
                Choose your path below:
            </p>
            
            <div class="mode-select">
                <div class="mode-card" onclick="startGame('guess')">
                    <div class="mode-icon">üïµÔ∏è</div>
                    <div class="mode-title">Guess the President</div>
                    <div class="mode-desc">
                        See a policy without knowing who proposed it. 
                        Try to guess which president created it. 
                        Discover how well you actually know political history!
                    </div>
                </div>
                
                <div class="mode-card" onclick="startGame('alignment')">
                    <div class="mode-icon">‚öñÔ∏è</div>
                    <div class="mode-title">Policy Alignment</div>
                    <div class="mode-desc">
                        See policies without any party labels. 
                        Simply rate them: Like, Neutral, or Dislike. 
                        At the end, discover where you actually lean politically!
                    </div>
                </div>
            </div>
        </div>
        
        <div id="gameArea" class="hidden">
            <div style="text-align: center; margin-bottom: 20px; color: #888; font-size: 1rem;" id="questionCounter">
                Question 1 of 20
            </div>
            
            <div class="score-board">
                <div class="stat">
                    <div class="stat-value" id="correctCount">0</div>
                    <div class="stat-label">Correct</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="totalCount">0</div>
                    <div class="stat-label">Played</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="accuracy">0%</div>
                    <div class="stat-label">Accuracy</div>
                </div>
            </div>
            
            <div class="policy-card">
                <span class="category" id="category">Healthcare</span>
                <p class="policy-text" id="policyText">
                    Loading policy...
                </p>
                <p class="question" id="question">Who proposed this policy?</p>
                <div class="choices" id="choices">
                    <!-- Buttons generated by JS -->
                </div>
            </div>
            
            <div class="reveal" id="reveal">
                <div class="answer-president" id="answerPresident"></div>
                <div class="answer-party" id="answerParty"></div>
                <div class="year" id="answerYear"></div>
            </div>
            
            <div class="fun-fact" id="funFact"></div>
            
            <button class="next-btn" id="nextBtn" onclick="nextPolicy()">Next Policy ‚Üí</button>
            
            <div class="bias-meter" id="biasMeter">
                <div class="bias-title">üìä Your Tribal Bias Score</div>
                <div class="bias-bar">
                    <div class="bias-fill" id="biasFill" style="width: 0%"></div>
                </div>
                <div class="bias-labels">
                    <span>Independent Thinker</span>
                    <span>Moderate Bias</span>
                    <span>Highly Tribal</span>
                </div>
                <p style="margin-top: 15px; font-size: 0.95rem; color: #aaa;" id="biasDescription">
                    Based on your guesses vs actual alignment
                </p>
            </div>
        </div>
    </div>

    <script>
        // Policy database - real policies from various presidents
        const policies = [
            {
                text: "Established a massive economic stimulus package including $1,200 direct payments to most Americans, expanded unemployment benefits, and hundreds of billions in aid to businesses during the COVID-19 pandemic.",
                answer: "Donald Trump",
                party: "Republican",
                year: "2020",
                category: "Economy",
                choices: ["Donald Trump", "Joe Biden", "Barack Obama", "George W. Bush"],
                fact: "The CARES Act passed with overwhelming bipartisan support, receiving 'yes' votes from 96% of both parties in the Senate."
            },
            {
                text: "Created a $1.2 trillion infrastructure package to rebuild roads, bridges, public transit, and broadband internet, with the stated goal of creating millions of jobs.",
                answer: "Joe Biden",
                party: "Democrat",
                year: "2021",
                category: "Infrastructure",
                choices: ["Joe Biden", "Donald Trump", "Barack Obama", "Bill Clinton"],
                fact: "This bill had more Republican support in the Senate than any major Biden legislation, with 19 Republicans voting yes."
            },
            {
                text: "Implemented a ban on travelers from seven predominantly Muslim countries and suspended refugee admissions, citing national security concerns.",
                answer: "Donald Trump",
                party: "Republican",
                year: "2017",
                category: "Immigration",
                choices: ["Donald Trump", "Barack Obama", "Joe Biden", "George W. Bush"],
                fact: "This policy went through multiple court challenges and revisions before being upheld by the Supreme Court in 2018."
            },
            {
                text: "Established a federal requirement that all Americans must have health insurance or face a tax penalty, while creating marketplaces for subsidized coverage.",
                answer: "Barack Obama",
                party: "Democrat",
                year: "2010",
                category: "Healthcare",
                choices: ["Barack Obama", "Bill Clinton", "George W. Bush", "Donald Trump"],
                fact: "This policy was originally a Republican idea proposed by the Heritage Foundation in 1989 and implemented by Mitt Romney in Massachusetts."
            },
            {
                text: "Cut the corporate tax rate from 35% to 21%, reduced individual tax brackets, and doubled the standard deduction, claiming it would spur economic growth.",
                answer: "Donald Trump",
                party: "Republican",
                year: "2017",
                category: "Taxes",
                choices: ["Donald Trump", "Ronald Reagan", "Joe Biden", "George W. Bush"],
                fact: "This was the largest corporate tax cut in U.S. history, reducing rates to their lowest point since 1939."
            },
            {
                text: "Reversed previous administration's immigration policies, restored DACA protections, and proposed a pathway to citizenship for 11 million undocumented immigrants.",
                answer: "Joe Biden",
                party: "Democrat",
                year: "2021",
                category: "Immigration",
                choices: ["Joe Biden", "Barack Obama", "Donald Trump", "George W. Bush"],
                fact: "Bush actually proposed comprehensive immigration reform with a pathway to citizenship in 2007, but it failed in Congress."
            },
            {
                text: "Authorized the raid that resulted in the death of Osama bin Laden in Pakistan, a mission described as the most significant achievement against al-Qaeda.",
                answer: "Barack Obama",
                party: "Democrat",
                year: "2011",
                category: "National Security",
                choices: ["Barack Obama", "George W. Bush", "Donald Trump", "Bill Clinton"],
                fact: "This decision was made against the advice of some advisors who rated the mission's chance of success at only 50-60%."
            },
            {
                text: "Created the largest expansion of public lands protection in decades, designating over 2 million acres of wilderness and establishing five new national monuments.",
                answer: "Joe Biden",
                party: "Democrat",
                year: "2023",
                category: "Environment",
                choices: ["Joe Biden", "Barack Obama", "Donald Trump", "George W. Bush"],
                fact: "Obama actually protected more land and water than any president in history, but this specific policy was Biden's expansion."
            },
            {
                text: "Implemented tariffs on over $300 billion worth of Chinese goods, escalating a trade war aimed at reducing the trade deficit and protecting American manufacturing.",
                answer: "Donald Trump",
                party: "Republican",
                year: "2018-2019",
                category: "Trade",
                choices: ["Donald Trump", "Joe Biden", "Barack Obama", "George W. Bush"],
                fact: "Biden actually kept most of these tariffs in place, with his administration calling them 'strategic' rather than reversing them."
            },
            {
                text: "Signed into law a bill requiring the federal government to negotiate drug prices for Medicare, projected to save taxpayers billions over the next decade.",
                answer: "Joe Biden",
                party: "Democrat",
                year: "2022",
                category: "Healthcare",
                choices: ["Joe Biden", "Donald Trump", "Barack Obama", "George W. Bush"],
                fact: "Trump actually campaigned on Medicare drug price negotiation in 2016 but didn't implement it during his presidency."
            },
            {
                text: "Authorized a $700 billion bailout of the financial industry to prevent economic collapse, including direct investments in banks and AIG insurance.",
                answer: "George W. Bush",
                party: "Republican",
                year: "2008",
                category: "Economy",
                choices: ["George W. Bush", "Barack Obama", "Bill Clinton", "Donald Trump"],
                fact: "This was passed by a Democratic Congress and signed by Bush. Most of the money was eventually repaid with interest."
            },
            {
                text: "Established a program to provide free community college tuition to all Americans, funded by tax increases on wealthy individuals and corporations.",
                answer: "None - Proposed but Failed",
                party: "Democrat Proposal",
                year: "2021",
                category: "Education",
                choices: ["Joe Biden (Failed)", "Barack Obama", "Hillary Clinton", "Bernie Sanders"],
                fact: "This was part of Biden's Build Back Better plan but was stripped from the final legislation by Senator Joe Manchin."
            },
            {
                text: "Created a new branch of the military specifically for space operations, the first new military branch since the Air Force was created in 1947.",
                answer: "Donald Trump",
                party: "Republican",
                year: "2019",
                category: "Defense",
                choices: ["Donald Trump", "Barack Obama", "George W. Bush", "Joe Biden"],
                fact: "The idea had bipartisan support in Congress, passing the Senate 90-8 and the House 377-48."
            },
            {
                text: "Issued an executive order requiring federal contractors to pay a minimum wage of $15 per hour, affecting hundreds of thousands of workers.",
                answer: "Joe Biden",
                party: "Democrat",
                year: "2021",
                category: "Labor",
                choices: ["Joe Biden", "Barack Obama", "Donald Trump", "George W. Bush"],
                fact: "Obama had previously issued an executive order requiring $10.10 for federal contractors in 2014."
            },
            {
                text: "Authorized the use of military force against Iraq based on claims of weapons of mass destruction, leading to the 2003 Iraq War.",
                answer: "George W. Bush",
                party: "Republican",
                year: "2003",
                category: "Foreign Policy",
                choices: ["George W. Bush", "Bill Clinton", "George H.W. Bush", "Barack Obama"],
                fact: "This had strong bipartisan support initially (82% of House Democrats voted yes), though many later expressed regret."
            },
            {
                text: "Established protections for up to 800,000 young undocumented immigrants brought to the U.S. as children, allowing them to work legally without fear of deportation.",
                answer: "Barack Obama",
                party: "Democrat",
                year: "2012",
                category: "Immigration",
                choices: ["Barack Obama", "Joe Biden", "George W. Bush", "Donald Trump"],
                fact: "Bush actually tried and failed to pass comprehensive immigration reform with a pathway to citizenship in 2007."
            },
            {
                text: "Rejoined the Paris Climate Agreement on day one of presidency, recommitting the U.S. to reducing greenhouse gas emissions.",
                answer: "Joe Biden",
                party: "Democrat",
                year: "2021",
                category: "Environment",
                choices: ["Joe Biden", "Barack Obama", "Donald Trump", "George W. Bush"],
                fact: "The U.S. originally joined under Obama, withdrew under Trump, and rejoined under Biden."
            },
            {
                text: "Implemented a 'zero tolerance' policy at the southern border that resulted in the separation of thousands of children from their parents.",
                answer: "Donald Trump",
                party: "Republican",
                year: "2018",
                category: "Immigration",
                choices: ["Donald Trump", "Barack Obama", "Joe Biden", "George W. Bush"],
                fact: "While family separations occurred under previous administrations, this was the first systematic policy of separation as a deterrent."
            },
            {
                text: "Passed the largest civil rights legislation since the 1960s, prohibiting discrimination based on sexual orientation and gender identity in employment.",
                answer: "None - Proposed but Failed",
                party: "Democrat Proposal",
                year: "2021",
                category: "Civil Rights",
                choices: ["Failed in Senate", "Barack Obama", "Bill Clinton", "George W. Bush"],
                fact: "The Equality Act passed the House but has stalled in the Senate due to filibuster rules, despite having majority support."
            },
            {
                text: "Issued more executive orders in the first 100 days than any president since FDR, reversing many of the previous administration's policies.",
                answer: "Joe Biden",
                party: "Democrat",
                year: "2021",
                category: "Governance",
                choices: ["Joe Biden", "Donald Trump", "Barack Obama", "George W. Bush"],
                fact: "Biden issued 42 executive orders in his first 100 days. Trump issued 32, Obama 19, and George W. Bush 7."
            }
        ];
        
        let currentPolicyIndex = 0;
        let correctCount = 0;
        let totalCount = 0;
        let guessedRepublican = 0;
        let guessedDemocrat = 0;
        let actualRepublican = 0;
        let actualDemocrat = 0;
        let shuffledPolicies = [];
        let gameMode = 'guess'; // 'guess' or 'alignment'
        
        // Alignment tracking
        let likedPolicies = [];
        let hatedPolicies = [];
        let neutralPolicies = [];
        
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        function startGame(mode) {
            gameMode = mode;
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameArea').classList.remove('hidden');
            shuffledPolicies = shuffleArray(policies);
            currentPolicyIndex = 0;
            
            if (mode === 'guess') {
                loadPolicy();
            } else {
                loadAlignmentPolicy();
            }
        }
        
        function loadPolicy() {
            if (currentPolicyIndex >= shuffledPolicies.length) {
                showFinalResults();
                return;
            }
            
            const policy = shuffledPolicies[currentPolicyIndex];
            
            document.getElementById('questionCounter').textContent = `Question ${currentPolicyIndex + 1} of ${shuffledPolicies.length}`;
            document.getElementById('category').textContent = policy.category;
            document.getElementById('policyText').textContent = policy.text;
            document.getElementById('question').textContent = 'Who proposed this policy?';
            
            const choicesDiv = document.getElementById('choices');
            choicesDiv.innerHTML = '';
            choicesDiv.style.gridTemplateColumns = 'repeat(2, 1fr)';
            
            policy.choices.forEach(choice => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.textContent = choice;
                btn.onclick = () => makeGuess(choice);
                choicesDiv.appendChild(btn);
            });
            
            document.getElementById('reveal').classList.remove('show');
            document.getElementById('nextBtn').classList.remove('show');
            document.getElementById('funFact').classList.remove('show');
            document.getElementById('biasMeter').classList.remove('show');
        }
        
        function loadAlignmentPolicy() {
            if (currentPolicyIndex >= shuffledPolicies.length) {
                showAlignmentResults();
                return;
            }
            
            const policy = shuffledPolicies[currentPolicyIndex];
            
            document.getElementById('questionCounter').textContent = `Question ${currentPolicyIndex + 1} of ${shuffledPolicies.length}`;
            document.getElementById('category').textContent = policy.category;
            document.getElementById('policyText').textContent = policy.text;
            document.getElementById('question').textContent = 'How do you feel about this policy?';
            
            const choicesDiv = document.getElementById('choices');
            choicesDiv.innerHTML = '';
            choicesDiv.style.gridTemplateColumns = 'repeat(3, 1fr)';
            
            const reactions = [
                { text: 'üëç Like It', class: 'like', value: 'like' },
                { text: 'üòê Neutral', class: 'middle', value: 'neutral' },
                { text: 'üëé Dislike', class: 'hate', value: 'hate' }
            ];
            
            reactions.forEach(reaction => {
                const btn = document.createElement('button');
                btn.className = `reaction-btn ${reaction.class}`;
                btn.textContent = reaction.text;
                btn.onclick = () => makeAlignmentChoice(reaction.value);
                choicesDiv.appendChild(btn);
            });
            
            document.getElementById('reveal').classList.remove('show');
            document.getElementById('nextBtn').classList.remove('show');
            document.getElementById('funFact').classList.remove('show');
            document.getElementById('biasMeter').classList.remove('show');
            
            // Hide stats in alignment mode
            document.querySelector('.score-board').style.display = 'none';
        }
        
        function makeAlignmentChoice(reaction) {
            const policy = shuffledPolicies[currentPolicyIndex];
            
            // Track the reaction
            if (reaction === 'like') {
                likedPolicies.push(policy);
            } else if (reaction === 'hate') {
                hatedPolicies.push(policy);
            } else {
                neutralPolicies.push(policy);
            }
            
            totalCount++;
            
            // Show next button immediately - NO REVEAL until end
            document.getElementById('nextBtn').classList.add('show');
            document.getElementById('nextBtn').onclick = nextAlignmentPolicy;
            
            // Disable all buttons
            const buttons = document.querySelectorAll('.reaction-btn');
            buttons.forEach(btn => btn.disabled = true);
        }
        
        function nextAlignmentPolicy() {
            currentPolicyIndex++;
            if (currentPolicyIndex >= shuffledPolicies.length) {
                showAlignmentResults();
            } else {
                loadAlignmentPolicy();
            }
        }
        
        function makeGuess(guess) {
            const policy = shuffledPolicies[currentPolicyIndex];
            const buttons = document.querySelectorAll('.choice-btn');
            
            buttons.forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === policy.answer) {
                    btn.classList.add('correct');
                } else if (btn.textContent === guess && guess !== policy.answer) {
                    btn.classList.add('wrong');
                }
            });
            
            const isCorrect = guess === policy.answer;
            if (isCorrect) {
                correctCount++;
            }
            totalCount++;
            
            // Track alignment
            const guessedParty = guess.includes('Trump') || guess.includes('Bush') || 
                                guess.includes('Reagan') ? 'Republican' : 'Democrat';
            const actualParty = policy.party;
            
            if (guessedParty === 'Republican') guessedRepublican++;
            else guessedDemocrat++;
            
            if (actualParty === 'Republican') actualRepublican++;
            else actualDemocrat++;
            
            // Update UI
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('totalCount').textContent = totalCount;
            document.getElementById('accuracy').textContent = 
                Math.round((correctCount / totalCount) * 100) + '%';
            
            // Show reveal
            document.getElementById('answerPresident').textContent = policy.answer;
            document.getElementById('answerParty').textContent = policy.party;
            document.getElementById('answerYear').textContent = policy.year;
            document.getElementById('reveal').classList.add('show');
            
            // Show fun fact
            document.getElementById('funFact').textContent = 'üí° ' + policy.fact;
            document.getElementById('funFact').classList.add('show');
            
            // Show next button
            document.getElementById('nextBtn').classList.add('show');
            
            // Update bias meter after a few rounds
            if (totalCount >= 3) {
                updateBiasMeter();
            }
        }
        
        function nextPolicy() {
            currentPolicyIndex++;
            if (gameMode === 'guess') {
                loadPolicy();
            } else {
                loadAlignmentPolicy();
            }
        }
        
        function updateBiasMeter() {
            const meter = document.getElementById('biasMeter');
            const fill = document.getElementById('biasFill');
            const desc = document.getElementById('biasDescription');
            
            // Calculate bias score
            // If you consistently guess one party more than they actually appear, that's bias
            const guessRatio = guessedRepublican / totalCount;
            const actualRatio = actualRepublican / totalCount;
            const biasScore = Math.abs(guessRatio - actualRatio) * 100;
            
            fill.style.width = Math.min(biasScore * 3, 100) + '%';
            
            let description = '';
            if (biasScore < 10) {
                description = "You're judging policies fairly independently! You guess evenly across parties.";
            } else if (biasScore < 25) {
                description = "Some tribal tendencies detected. You occasionally guess based on party stereotypes.";
            } else {
                description = "Strong tribal bias! You're heavily influenced by who you think proposed policies rather than their content.";
            }
            
            desc.textContent = description;
            meter.classList.add('show');
        }
        
        function showFinalResults() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <h2 style="font-size: 2.5rem; margin-bottom: 20px; color: #5a9a8c;">üéâ Game Complete!</h2>
                    <p style="font-size: 1.3rem; margin-bottom: 30px;">
                        You correctly identified <strong>${correctCount}</strong> out of <strong>${totalCount}</strong> policies
                        (${Math.round((correctCount/totalCount)*100)}% accuracy)
                    </p>
                    <div style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; margin: 30px 0;">
                        <h3 style="color: #f39c12; margin-bottom: 15px;">üß† The Real Lesson</h3>
                        <p style="font-size: 1.1rem; line-height: 1.8;">
                            If you were surprised by any of these, you're not alone. Most Americans can't accurately 
                            attribute policies to presidents without party labels. We tend to support or oppose ideas 
                            based on tribal affiliation rather than the actual content.
                        </p>
                    </div>
                    <button class="start-btn" onclick="location.reload()" style="margin-top: 20px;">
                        Play Again
                    </button>
                </div>
            `;
        }
        
        function showAlignmentResults() {
            // Calculate alignment
            let leftScore = 0;
            let rightScore = 0;
            let totalWeighted = 0;
            
            // Policies liked that are Democrat = +left
            // Policies liked that are Republican = +right
            // Policies hated that are Democrat = +right (opposition)
            // Policies hated that are Republican = +left (opposition)
            
            likedPolicies.forEach(policy => {
                if (policy.party === 'Democrat') leftScore += 2;
                if (policy.party === 'Republican') rightScore += 2;
                totalWeighted += 2;
            });
            
            hatedPolicies.forEach(policy => {
                if (policy.party === 'Democrat') rightScore += 2;
                if (policy.party === 'Republican') leftScore += 2;
                totalWeighted += 2;
            });
            
            neutralPolicies.forEach(policy => {
                // Neutral counts as 0.5 for both (slight preference)
                if (policy.party === 'Democrat') { leftScore += 0.5; rightScore += 0.5; }
                if (policy.party === 'Republican') { leftScore += 0.5; rightScore += 0.5; }
                totalWeighted += 1;
            });
            
            const total = leftScore + rightScore;
            const leftPercent = total > 0 ? (leftScore / total) * 100 : 50;
            const rightPercent = total > 0 ? (rightScore / total) * 100 : 50;
            
            let alignmentText = '';
            let alignmentColor = '';
            let emoji = '';
            
            if (leftPercent >= 60) {
                alignmentText = 'You lean LEFT'
                alignmentColor = '#3498db';
                emoji = 'üü¶';
            } else if (rightPercent >= 60) {
                alignmentText = 'You lean RIGHT';
                alignmentColor = '#e74c3c';
                emoji = 'üü•';
            } else {
                alignmentText = 'You are MODERATE / CENTRIST';
                alignmentColor = '#9b59b6';
                emoji = '‚ö™';
            }
            
            // Find surprises (liked policies from opposing side)
            const surprises = [];
            if (leftPercent > 50) {
                const likedRepublican = likedPolicies.filter(p => p.party === 'Republican');
                if (likedRepublican.length > 0) {
                    surprises.push(`You liked ${likedRepublican.length} Republican policies!`);
                }
            } else if (rightPercent > 50) {
                const likedDemocrat = likedPolicies.filter(p => p.party === 'Democrat');
                if (likedDemocrat.length > 0) {
                    surprises.push(`You liked ${likedDemocrat.length} Democrat policies!`);
                }
            }
            
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <h2 style="font-size: 2.5rem; margin-bottom: 20px; color: ${alignmentColor};">
                        ${emoji} ${alignmentText}
                    </h2>
                    <div style="display: flex; justify-content: center; gap: 50px; margin: 40px 0;">
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; font-weight: bold; color: #3498db;">${Math.round(leftPercent)}%</div>
                            <div style="color: #888; margin-top: 10px;">Left Alignment</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; font-weight: bold; color: #e74c3c;">${Math.round(rightPercent)}%</div>
                            <div style="color: #888; margin-top: 10px;">Right Alignment</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; margin: 30px 0; text-align: left;">
                        <h3 style="color: #f39c12; margin-bottom: 20px; text-align: center;">üìä Your Policy Breakdown</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div>
                                <strong style="color: #27ae60;">üëç Liked:</strong> ${likedPolicies.length} policies
                            </div>
                            <div>
                                <strong style="color: #e74c3c;">üëé Disliked:</strong> ${hatedPolicies.length} policies
                            </div>
                            <div>
                                <strong style="color: #f39c12;">üòê Neutral:</strong> ${neutralPolicies.length} policies
                            </div>
                            <div>
                                <strong>üìã Total:</strong> ${totalCount} policies
                            </div>
                        </div>
                        
                        ${surprises.length > 0 ? `
                            <div style="background: rgba(243, 156, 18, 0.1); padding: 15px; border-radius: 10px; margin-top: 20px; border-left: 3px solid #f39c12;">
                                <strong>ü§Ø Surprising Findings:</strong><br>
                                ${surprises.join('<br>')}
                            </div>
                        ` : ''}
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; margin: 30px 0;">
                        <h3 style="color: #5a9a8c; margin-bottom: 15px;">üß† What This Means</h3>
                        <p style="font-size: 1.1rem; line-height: 1.8;">
                            ${leftPercent > 60 ? 
                                "You consistently favored policies that were primarily championed by Democratic administrations. Your preferences align with progressive priorities on the issues presented." :
                             rightPercent > 60 ?
                                "You consistently favored policies that were primarily championed by Republican administrations. Your preferences align with conservative priorities on the issues presented." :
                                "You don't strongly favor either party's policies. You're either a true moderate, or your views don't fit neatly into the traditional left-right spectrum."
                            }
                        </p>
                        <p style="font-size: 1.1rem; line-height: 1.8; margin-top: 20px; color: #aaa;">
                            The key insight: You rated these policies <strong>without knowing</strong> which party proposed them. 
                            This reveals your <em>actual</em> policy preferences, stripped of tribal loyalty.
                        </p>
                    </div>
                    
                    <button class="start-btn" onclick="location.reload()" style="margin-top: 20px;">
                        Play Again
                    </button>
                </div>
            `;
        }
    </script>
</body>
</html>
